<h2>シフト割り当て状況</h2>

<table class="assignment-table">
  <thead>
    <tr>
      <th>日付</th>
      <th>時間</th>
      <th>会場</th>
      <th>必要人数</th>
      <th>確定人数</th>
      <th>残人数</th>
      <th>ステータス</th>
    </tr>
  </thead>
  <tbody>
    <% @projects.each do |project| %>
      <% confirmed = project.shift_assignments.count %>
      <% remaining = project.required_number - confirmed %>
      <tr>
        <td><%= project.work_date.strftime("%-m/%d（%a）") %></td>
        <td><%= "#{project.start_time.strftime('%H:%M')}〜#{project.end_time.strftime('%H:%M')}" %></td>
        <td><%= project.location %></td>
        <td><%= project.required_number %></td>
        <td><%= confirmed %></td>
        <td><%= remaining > 0 ? remaining : "-" %></td>
        <!--ステータス-->
        <td>
          <% if remaining <= 0 %>
            <span class="status done">✔ 済</span>
          <% elsif confirmed == 0 %>
            <span class="status danger">❗ 要割当</span>
          <% else %>
            <span class="status warn">⚠ あと<%= remaining %>人</span>
          <% end %>
        </td>
        <!--ステータスここまで-->
      </tr>
    <% end %>
  </tbody>
</table>